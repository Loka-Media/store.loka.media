"use client";

import { useEffect, useRef } from "react";
import { GradientText } from "@/components/ui/GradientText";

const CustomizableShopsHeading = () => (
  <svg width="1760" height="300" viewBox="0 0 1760 300" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-auto">
    <path d="M23.18 114H4.88V32.26H74.054V48.73H23.18V67.152H72.224V83.5H23.18V114ZM109.539 115.22C92.3368 115.22 84.1628 104.606 84.1628 90.942V52.878H102.463V84.842C102.463 94.724 106.611 98.872 118.201 98.872C130.157 98.872 134.427 94.236 134.427 83.866V52.878H152.727V114H135.647V95.334H134.671C133.085 105.582 125.643 115.22 109.539 115.22ZM182.824 114H164.524V32.26H182.824V114ZM213.143 114H194.843V32.26H213.143V114ZM236.873 134.74H226.869V118.148H241.875C246.389 118.148 248.341 116.928 249.561 114.244L219.671 52.878H240.411L253.343 80.816L258.467 95.212H259.687L264.567 80.694L276.157 52.878H296.531L266.275 118.392C260.419 131.202 252.245 134.74 236.873 134.74ZM366.485 115.22C339.523 115.22 322.809 98.628 322.809 73.13C322.809 47.632 339.523 31.04 366.485 31.04C391.861 31.04 408.209 43.728 408.209 64.468V66.298H387.835V64.468C387.835 53.732 381.735 48.608 366.851 48.608C348.917 48.608 342.207 54.952 342.207 73.13C342.207 91.308 348.917 97.652 366.851 97.652C381.735 97.652 387.835 92.528 387.835 81.792V79.962H408.209V81.792C408.209 102.532 391.983 115.22 366.485 115.22ZM443.833 115.22C426.631 115.22 418.457 104.606 418.457 90.942V52.878H436.757V84.842C436.757 94.724 440.905 98.872 452.495 98.872C464.451 98.872 468.721 94.236 468.721 83.866V52.878H487.021V114H469.941V95.334H468.965C467.379 105.582 459.937 115.22 443.833 115.22ZM529.684 115.22C509.066 115.22 497.72 107.168 497.72 93.016V92.65H516.02V93.748C516.02 99.238 519.436 100.702 529.806 100.702C539.566 100.702 541.884 99.116 541.884 95.456C541.884 92.04 540.054 91.064 532.856 90.088L515.654 88.014C503.454 86.672 496.622 81.182 496.622 70.934C496.622 60.198 505.772 51.658 526.756 51.658C546.764 51.658 558.11 59.222 558.11 74.106V74.472H539.81V73.74C539.81 68.738 537.37 66.176 526.146 66.176C516.996 66.176 514.678 67.762 514.678 71.666C514.678 74.838 516.386 76.18 524.438 77.156L537.492 78.742C553.84 80.572 559.94 86.062 559.94 96.188C559.94 107.656 548.594 115.22 529.684 115.22ZM612.83 114H597.702C583.428 114 574.766 107.29 574.766 91.918V68.006H565.128V52.878H574.766V41.044H593.066V52.878H612.83V68.006H593.066V89.844C593.066 95.944 595.384 97.53 601.85 97.53H612.83V114ZM654.698 115.22C633.836 115.22 619.806 102.776 619.806 83.5C619.806 63.98 633.836 51.658 654.698 51.658C675.56 51.658 689.59 63.98 689.59 83.5C689.59 102.776 675.56 115.22 654.698 115.22ZM654.698 98.994C667.02 98.994 671.412 94.236 671.412 83.5C671.412 72.764 667.02 67.762 654.698 67.762C642.254 67.762 637.984 72.764 637.984 83.5C637.984 94.236 642.254 98.994 654.698 98.994ZM717.803 114H699.503V52.878H716.461V71.422H717.437C718.901 61.174 725.001 51.658 740.373 51.658C754.525 51.658 761.723 60.32 763.065 71.666H764.163C765.627 61.296 771.849 51.658 787.587 51.658C803.325 51.658 811.011 62.028 811.011 75.936V114H792.711V82.036C792.711 71.91 789.173 68.128 778.681 68.128C767.579 68.128 764.407 72.52 764.407 83.134V114H746.107V82.036C746.107 71.91 742.569 68.128 732.077 68.128C720.975 68.128 717.803 72.52 717.803 83.134V114ZM841.052 46.656H822.752V32.26H841.052V46.656ZM841.052 114H822.752V52.878H841.052V114ZM915.413 114H850.509V98.384L876.739 77.522L889.549 69.47V68.25L876.739 68.982H852.339V52.878H913.583V68.616L885.279 90.454L873.689 97.652V98.872L885.279 98.018H915.413V114ZM943.877 115.22C930.701 115.22 922.771 109.12 922.771 98.872C922.771 89.844 929.481 84.232 942.535 82.89L968.765 80.206V77.888C968.765 69.958 965.227 67.762 955.467 67.762C946.195 67.762 942.413 70.202 942.413 77.156V77.644H923.991V77.278C923.991 62.15 936.679 51.658 956.809 51.658C977.183 51.658 986.821 62.15 986.821 78.132V114H969.741V99.97H968.765C965.959 109.486 957.419 115.22 943.877 115.22ZM941.193 97.652C941.193 100.946 943.755 102.288 949.123 102.288C961.567 102.288 968.277 99.36 968.765 90.698L947.537 93.138C943.145 93.504 941.193 94.724 941.193 97.652ZM1015.49 114H998.537V32.26H1016.84V69.104H1017.81C1019.89 58.856 1027.33 51.658 1041.85 51.658C1060.15 51.658 1070.39 63.98 1070.39 83.5C1070.39 102.776 1060.02 115.22 1040.99 115.22C1026.84 115.22 1018.79 109.12 1016.59 97.042H1015.49V114ZM1016.84 83.866C1016.84 94.48 1023.06 98.506 1034.65 98.506C1046.48 98.506 1051.85 94.602 1051.85 83.5C1051.85 72.276 1046.48 68.372 1034.77 68.372C1022.94 68.372 1016.84 72.276 1016.84 82.89V83.866ZM1098.74 114H1080.44V32.26H1098.74V114ZM1143.21 115.22C1122.84 115.22 1108.93 105.216 1108.93 83.5C1108.93 63.98 1122.72 51.658 1142.85 51.658C1162.86 51.658 1176.15 62.15 1176.15 81.304C1176.15 83.5 1175.91 85.086 1175.67 87.16H1125.89C1126.38 96.554 1130.77 100.58 1142.6 100.58C1153.46 100.58 1157.24 97.774 1157.24 92.528V91.308H1175.54V92.65C1175.54 105.948 1162.61 115.22 1143.21 115.22ZM1142.48 65.932C1131.62 65.932 1126.99 69.592 1126.13 77.522H1158.59C1158.1 69.47 1153.22 65.932 1142.48 65.932ZM1244.71 115.22C1219.94 115.22 1206.03 105.46 1206.03 86.428V85.696H1224.33V87.892C1224.33 95.456 1228.11 98.506 1244.71 98.506C1259.35 98.506 1262.76 96.31 1262.76 90.82C1262.76 85.818 1259.96 83.988 1251.54 82.524L1228.6 79.23C1213.96 76.912 1205.3 69.592 1205.3 56.294C1205.3 43.972 1215.3 31.04 1242.75 31.04C1267.89 31.04 1279.6 42.63 1279.6 59.832V60.564H1261.18V58.856C1261.18 51.048 1257.15 47.754 1240.92 47.754C1227.75 47.754 1223.72 50.316 1223.72 55.562C1223.72 60.32 1226.41 62.028 1233.24 63.248L1256.17 66.908C1274.47 69.836 1281.06 78.742 1281.06 89.966C1281.06 103.264 1270.69 115.22 1244.71 115.22ZM1309.26 114H1290.96V32.26H1309.26V71.544H1310.23C1312.18 61.174 1319.38 51.658 1335 51.658C1351.47 51.658 1359.52 62.394 1359.52 76.546V114H1341.22V82.036C1341.22 71.788 1336.83 68.128 1325.36 68.128C1313.04 68.128 1309.26 73.13 1309.26 83.378V114ZM1403.77 115.22C1382.91 115.22 1368.88 102.776 1368.88 83.5C1368.88 63.98 1382.91 51.658 1403.77 51.658C1424.63 51.658 1438.66 63.98 1438.66 83.5C1438.66 102.776 1424.63 115.22 1403.77 115.22ZM1403.77 98.994C1416.09 98.994 1420.48 94.236 1420.48 83.5C1420.48 72.764 1416.09 67.762 1403.77 67.762C1391.32 67.762 1387.05 72.764 1387.05 83.5C1387.05 94.236 1391.32 98.994 1403.77 98.994ZM1466.87 134.74H1448.57V52.878H1465.53V69.592H1466.75C1468.95 57.88 1476.76 51.658 1491.15 51.658C1509.94 51.658 1520.43 64.102 1520.43 83.5C1520.43 102.898 1510.18 115.22 1491.76 115.22C1477.61 115.22 1469.8 108.266 1467.73 97.53H1466.87V134.74ZM1466.87 84.354C1466.87 94.846 1473.22 98.506 1484.69 98.506C1496.4 98.506 1501.89 94.602 1501.89 83.5C1501.89 72.276 1496.4 68.494 1484.81 68.494C1472.97 68.494 1466.87 72.52 1466.87 83.378V84.354ZM1536.46 131.202H1529.99V119.856H1535.97C1538.41 119.856 1539.63 119.246 1539.63 116.074V114H1529.26V92.65H1552.81V115.952C1552.81 126.2 1546.83 131.202 1536.46 131.202Z" fill="url(#paint0_linear_1231_154)"/>
    <path d="M565.504 264H547.204V204.952H526.22V192.386H529.636C538.664 192.386 544.764 190.312 548.79 182.26H565.504V264ZM616.753 265.22C590.401 265.22 575.883 248.628 575.883 223.13C575.883 197.754 590.401 181.04 616.753 181.04C642.983 181.04 657.623 197.754 657.623 223.13C657.623 248.628 642.983 265.22 616.753 265.22ZM616.753 247.408C632.247 247.408 637.981 240.698 637.981 223.13C637.981 205.562 632.247 198.852 616.753 198.852C601.137 198.852 595.525 205.562 595.525 223.13C595.525 240.698 601.137 247.408 616.753 247.408ZM706.88 265.22C680.528 265.22 666.01 248.628 666.01 223.13C666.01 197.754 680.528 181.04 706.88 181.04C733.11 181.04 747.75 197.754 747.75 223.13C747.75 248.628 733.11 265.22 706.88 265.22ZM706.88 247.408C722.374 247.408 728.108 240.698 728.108 223.13C728.108 205.562 722.374 198.852 706.88 198.852C691.264 198.852 685.652 205.562 685.652 223.13C685.652 240.698 691.264 247.408 706.88 247.408ZM776.39 221.666C762.848 221.666 754.918 213.492 754.918 201.292C754.918 189.092 762.848 180.796 776.39 180.796C790.054 180.796 797.984 189.092 797.984 201.292C797.984 213.492 790.054 221.666 776.39 221.666ZM776.878 264H759.188L828.606 182.26H846.296L776.878 264ZM776.39 209.71C782.856 209.71 784.93 207.392 784.93 201.292C784.93 195.192 782.856 192.752 776.39 192.752C770.046 192.752 767.972 195.192 767.972 201.292C767.972 207.392 770.046 209.71 776.39 209.71ZM828.972 265.342C815.43 265.342 807.378 257.168 807.378 244.968C807.378 232.768 815.43 224.594 828.972 224.594C842.514 224.594 850.566 232.768 850.566 244.968C850.566 257.168 842.514 265.342 828.972 265.342ZM828.972 253.386C835.316 253.386 837.512 251.068 837.512 244.968C837.512 238.868 835.316 236.428 828.972 236.428C822.628 236.428 820.432 238.868 820.432 244.968C820.432 251.068 822.628 253.386 828.972 253.386ZM923.125 265.22C896.041 265.22 879.205 248.628 879.205 223.13C879.205 197.632 896.041 181.04 923.125 181.04C950.819 181.04 967.533 197.632 967.533 223.13C967.533 248.628 950.819 265.22 923.125 265.22ZM923.125 247.652C941.059 247.652 948.013 241.308 948.013 223.13C948.013 204.952 941.059 198.608 923.125 198.608C905.191 198.608 898.603 204.952 898.603 223.13C898.603 241.308 905.191 247.652 923.125 247.652ZM1012.6 264H989.788L973.074 202.878H991.984L999.182 230.816L1001.74 249.848H1002.96L1007.84 228.986L1017.12 202.878H1040.66L1049.81 228.986L1054.69 249.848H1055.91L1058.6 230.816L1065.67 202.878H1084.34L1067.01 264H1044.2L1033.71 234.598L1029.19 217.762H1027.85L1023.22 234.598L1012.6 264ZM1109.97 264H1091.67V202.878H1108.63V221.666H1109.73C1111.31 211.418 1118.63 201.658 1134.61 201.658C1151.33 201.658 1159.26 212.394 1159.26 225.936V264H1140.96V232.036C1140.96 222.276 1136.93 218.128 1125.71 218.128C1114.12 218.128 1109.97 222.764 1109.97 233.134V264ZM1203.41 265.22C1183.03 265.22 1169.13 255.216 1169.13 233.5C1169.13 213.98 1182.91 201.658 1203.04 201.658C1223.05 201.658 1236.35 212.15 1236.35 231.304C1236.35 233.5 1236.1 235.086 1235.86 237.16H1186.08C1186.57 246.554 1190.96 250.58 1202.8 250.58C1213.66 250.58 1217.44 247.774 1217.44 242.528V241.308H1235.74V242.65C1235.74 255.948 1222.81 265.22 1203.41 265.22ZM1202.68 215.932C1191.82 215.932 1187.18 219.592 1186.33 227.522H1218.78C1218.29 219.47 1213.41 215.932 1202.68 215.932ZM1273.88 265.22C1254.85 265.22 1244.35 252.776 1244.35 233.5C1244.35 213.98 1254.72 201.658 1272.9 201.658C1287.42 201.658 1294.86 208.856 1296.94 219.104H1298.03V182.26H1316.33V264H1299.25V247.042H1298.28C1295.96 259.12 1287.91 265.22 1273.88 265.22ZM1262.9 233.5C1262.9 244.602 1268.39 248.506 1280.1 248.506C1291.69 248.506 1298.03 244.48 1298.03 233.866V232.89C1298.03 222.276 1291.81 218.372 1280.1 218.372C1268.39 218.372 1262.9 222.276 1262.9 233.5ZM1366.68 264H1349.72V182.26H1368.02V219.104H1369C1371.07 208.856 1378.51 201.658 1393.03 201.658C1411.33 201.658 1421.58 213.98 1421.58 233.5C1421.58 252.776 1411.21 265.22 1392.18 265.22C1378.02 265.22 1369.97 259.12 1367.78 247.042H1366.68V264ZM1368.02 233.866C1368.02 244.48 1374.24 248.506 1385.83 248.506C1397.67 248.506 1403.03 244.602 1403.03 233.5C1403.03 222.276 1397.67 218.372 1385.95 218.372C1374.12 218.372 1368.02 222.276 1368.02 232.89V233.866ZM1443.34 284.74H1433.33V268.148H1448.34C1452.85 268.148 1454.81 266.928 1456.03 264.244L1426.14 202.878H1446.88L1459.81 230.816L1464.93 245.212H1466.15L1471.03 230.694L1482.62 202.878H1503L1472.74 268.392C1466.88 281.202 1458.71 284.74 1443.34 284.74ZM1542.82 284.74H1532.81V268.148H1547.82C1552.33 268.148 1554.28 266.928 1555.5 264.244L1525.61 202.878H1546.35L1559.29 230.816L1564.41 245.212H1565.63L1570.51 230.694L1582.1 202.878H1602.47L1572.22 268.392C1566.36 281.202 1558.19 284.74 1542.82 284.74ZM1641.89 265.22C1621.03 265.22 1607 252.776 1607 233.5C1607 213.98 1621.03 201.658 1641.89 201.658C1662.75 201.658 1676.78 213.98 1676.78 233.5C1676.78 252.776 1662.75 265.22 1641.89 265.22ZM1641.89 248.994C1654.21 248.994 1658.61 244.236 1658.61 233.5C1658.61 222.764 1654.21 217.762 1641.89 217.762C1629.45 217.762 1625.18 222.764 1625.18 233.5C1625.18 244.236 1629.45 248.994 1641.89 248.994ZM1711.95 265.22C1694.75 265.22 1686.58 254.606 1686.58 240.942V202.878H1704.88V234.842C1704.88 244.724 1709.02 248.872 1720.61 248.872C1732.57 248.872 1736.84 244.236 1736.84 233.866V202.878H1755.14V264H1738.06V245.334H1737.08C1735.5 255.582 1728.06 265.22 1711.95 265.22Z" fill="url(#paint1_linear_1231_154)"/>
    <defs>
      <linearGradient id="paint0_linear_1231_154" x1="778.5" y1="0" x2="778.5" y2="150" gradientUnits="userSpaceOnUse">
        <stop stopColor="white"/>
        <stop offset="1" stopColor="#B94D13"/>
      </linearGradient>
      <linearGradient id="paint1_linear_1231_154" x1="1142.5" y1="150" x2="1142.5" y2="300" gradientUnits="userSpaceOnUse">
        <stop stopColor="white"/>
        <stop offset="1" stopColor="#B94D13"/>
      </linearGradient>
    </defs>
  </svg>
);

export function CustomizableShopsSection() {
  const topRowRef = useRef<HTMLDivElement>(null);
  const bottomRowRef = useRef<HTMLDivElement>(null);

  // Top row shop images (moving left)
  const topRowShops = [
    {
      url: "/images/w1.webp",
      title: "The Home of History",
      theme: "dark-blue",
      website: "https://neffsauce.com"
    },
    {
      url: "/images/w2.webp",
      title: "Fashion Forward",
      theme: "yellow",
      website: "https://shop.lonelyshark.io"
    },
    {
      url: "/images/w3.webp",
      title: "Grill Kings Edition",
      theme: "red-dark",
      website: "https://example3.com"
    },
    {
      url: "/images/w4.webp",
      title: "Warislane",
      theme: "black",
      website: "https://example4.com"
    },
    {
      url: "/images/w5.webp",
      title: "Creator Studio",
      theme: "white",
      website: "https://example5.com"
    },
    {
      url: "/images/w6.webp",
      title: "Retro Gaming",
      theme: "purple",
      website: "https://example6.com"
    }
  ];

  // Bottom row shop images (moving right)
  const bottomRowShops = [
    {
      url: "/images/w7.webp",
      title: "The Five King Show",
      theme: "blue",
      website: "https://example7.com"
    },
    {
      url: "/images/w8.webp",
      title: "Apparel Collection",
      theme: "beige",
      website: "https://example8.com"
    },
    {
      url: "/images/w9.webp",
      title: "Horror Series",
      theme: "dark-red",
      website: "https://example9.com"
    },
    {
      url: "/images/w10.webp",
      title: "Cartoon World",
      theme: "yellow-bright",
      website: "https://example10.com"
    }
  ];

  useEffect(() => {
    const topRow = topRowRef.current;
    const bottomRow = bottomRowRef.current;

    if (!topRow || !bottomRow) return;

    // Top row animation (moving right to left continuously)
    const topRowAnimation = topRow.animate([
      { transform: 'translateX(0%)' },
      { transform: 'translateX(-50%)' }
    ], {
      duration: 30000,
      iterations: Infinity,
      easing: 'linear'
    });

    // Bottom row animation (moving left to right continuously)
    const bottomRowAnimation = bottomRow.animate([
      { transform: 'translateX(-50%)' },
      { transform: 'translateX(0%)' }
    ], {
      duration: 35000,
      iterations: Infinity,
      easing: 'linear'
    });

    return () => {
      topRowAnimation.cancel();
      bottomRowAnimation.cancel();
    };
  }, []);


  const handleCardClick = (website: string) => {
    window.open(website, '_blank');
  };

  return (
    <section className="relative py-20 bg-black overflow-hidden border-y border-white/10">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        {/* Header */}
        <div className="flex flex-col items-center mb-16 space-y-8">
          <div className="w-full max-w-4xl">
            <CustomizableShopsHeading />
          </div>
          <GradientText className="text-lg sm:text-xl font-medium max-w-2xl mx-auto leading-relaxed text-center block">
            Or customize the product and publish to our shop. Easily customize your design, layout, and domain to create a brand that's as unique as you are.
          </GradientText>
        </div>
      </div>

      {/* Scrolling shop previews */}
      <div className="space-y-8">
        {/* Top row - moving left */}
        <div className="overflow-hidden">
          <div
            ref={topRowRef}
            className="flex space-x-6"
            style={{ width: '200%' }}
          >
            {/* Duplicate the array to create seamless loop */}
            {[...topRowShops, ...topRowShops].map((shop, index) => (
              <div
                key={`top-${index}`}
                className="flex-shrink-0 w-48 h-36 sm:w-64 sm:h-48 md:w-80 md:h-60 rounded-2xl overflow-hidden shadow-lg hover:shadow-[8px_8px_0_0_rgba(255,255,255,0.1)] hover:translate-x-[-2px] hover:translate-y-[-2px] transition-all group cursor-pointer border border-white/20"
                onClick={() => handleCardClick(shop.website)}
              >
                <div className="w-full h-full relative bg-white/5 flex flex-col">
                  {/* Mock browser header */}
                  <div className="flex items-center p-3 border-b border-white/20 bg-white/10">
                    <div className="flex space-x-1.5">
                      <div className="w-3 h-3 bg-red-500 rounded-full border border-white/20"></div>
                      <div className="w-3 h-3 bg-yellow-400 rounded-full border border-white/20"></div>
                      <div className="w-3 h-3 bg-green-500 rounded-full border border-white/20"></div>
                    </div>
                  </div>

                  {/* Shop content */}
                  <div className="flex-1 relative overflow-hidden">
                    {/* Main image */}
                    <img
                      src={shop.url}
                      alt={shop.title}
                      className="w-full h-full object-cover"
                    />
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Bottom row - moving right */}
        <div className="overflow-hidden">
          <div
            ref={bottomRowRef}
            className="flex space-x-6"
            style={{ width: '200%' }}
          >
            {/* Duplicate the array to create seamless loop */}
            {[...bottomRowShops, ...bottomRowShops].map((shop, index) => (
              <div
                key={`bottom-${index}`}
                className="flex-shrink-0 w-48 h-36 sm:w-64 sm:h-48 md:w-80 md:h-60 rounded-2xl overflow-hidden shadow-lg hover:shadow-[8px_8px_0_0_rgba(255,255,255,0.1)] hover:translate-x-[-2px] hover:translate-y-[-2px] transition-all group cursor-pointer border border-white/20"
                onClick={() => handleCardClick(shop.website)}
              >
                <div className="w-full h-full relative bg-white/5 flex flex-col">
                  {/* Mock browser header */}
                  <div className="flex items-center p-3 border-b border-white/20 bg-white/10">
                    <div className="flex space-x-1.5">
                      <div className="w-3 h-3 bg-red-500 rounded-full border border-white/20"></div>
                      <div className="w-3 h-3 bg-yellow-400 rounded-full border border-white/20"></div>
                      <div className="w-3 h-3 bg-green-500 rounded-full border border-white/20"></div>
                    </div>
                  </div>

                  {/* Shop content */}
                  <div className="flex-1 relative overflow-hidden">
                    {/* Main image */}
                    <img
                      src={shop.url}
                      alt={shop.title}
                      className="w-full h-full object-cover"
                    />
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>


    </section>
  );
}
